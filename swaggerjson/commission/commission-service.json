{"swagger":"2.0","info":{"description":"TODO: Please specify the description of this service","version":"1","title":"Commission Service Service API"},"host":"api.dev.titan.v4af.com","basePath":"/commission","tags":[{"name":"commission-controller-v-1","description":"Commission Controller V 1"},{"name":"default-rule-controller-v-1","description":"Default Rule Controller V 1"},{"name":"commission-rules-controller-v-1","description":"Commission Rules Controller V 1"}],"paths":{"/commission/v1/{productId}/{tenantId}/entities/{entityId}/commissions/agency{?policyId,chargeAmount}":{"get":{"tags":["commission-controller-v-1"],"summary":"Get Agency Commission amount for the charge amount based on Policy's Agency Commission","description":"Calculates the Agency Commission specified by the policy ID and the charge amount provided.","operationId":"calculateAgencyCommissionUsingGET","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"productId","in":"path","description":"ID of the product for which the request is being made","required":false,"type":"string"},{"name":"tenantId","in":"path","description":"ID of the tenant for which the request is being made","required":false,"type":"string"},{"name":"entityId","in":"path","description":"ID of the entity for which the request is being made","required":false,"type":"string"},{"name":"policyId","in":"query","description":"The policy id for the policy with the premium and details used to calculate the commission amount.","required":false,"type":"string"},{"name":"chargeAmount","in":"query","description":"The charge amount that the commission will be based off of.","required":false,"type":"number"}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/SingleResponseV1«CommissionV1»"}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"}}}},"/commission/v1/{productId}/{tenantId}/entities/{entityId}/commissions/employee{?policyId,chargeAmount}":{"get":{"tags":["commission-controller-v-1"],"summary":"Get Employee Commission Amount for the charge amount based on Policy Data","description":"Calculates the Employee Commission specified by the commission rules and the charge amount provided.","operationId":"calculateEmployeeCommissionUsingGET","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"productId","in":"path","description":"ID of the product for which the request is being made","required":false,"type":"string"},{"name":"tenantId","in":"path","description":"ID of the tenant for which the request is being made","required":false,"type":"string"},{"name":"entityId","in":"path","description":"ID of the entity for which the request is being made","required":false,"type":"string"},{"name":"policyId","in":"query","description":"The policy id for the policy with the premium and details used to calculate the commission amount.","required":false,"type":"string"},{"name":"chargeAmount","in":"query","description":"The charge amount that the commission will be based off of.","required":false,"type":"number"}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/SingleResponseV1«CommissionV1»"}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"}}}},"/commission/v1/{productId}/{tenantId}/entities/{entityId}/commissions/full{?policyId,chargeAmount}":{"get":{"tags":["commission-controller-v-1"],"summary":"Get Agency and Employee Commission Amount for a Policy","description":"Calculates the Agency and Employee Commission amounts specified by the policy ID and the charge amount provided.","operationId":"calculateFullCommissionUsingGET","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"productId","in":"path","description":"ID of the product for which the request is being made","required":false,"type":"string"},{"name":"tenantId","in":"path","description":"ID of the tenant for which the request is being made","required":false,"type":"string"},{"name":"entityId","in":"path","description":"ID of the entity for which the request is being made","required":false,"type":"string"},{"name":"policyId","in":"query","description":"The policy id for the policy with the premium and agency commission used to calculate the commission.","required":false,"type":"string"},{"name":"chargeAmount","in":"query","description":"The charge amount that the commission will be based off of.","required":false,"type":"number"}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/SingleResponseV1«CommissionV1»"}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"}}}},"/commission/v1/{productId}/{tenantId}/entities/{entityId}/commissions{?policyId,chargeAmount}":{"get":{"tags":["commission-controller-v-1"],"summary":"DEPRECATED - Get Agency and Employee Commission Amount for a Policy","description":"Calculates the Employee and/or Agency Commission specified by the policy ID and the charge amount provided.","operationId":"calculateFullCommission_DEPRECATEDUsingGET","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"productId","in":"path","description":"ID of the product for which the request is being made","required":false,"type":"string"},{"name":"tenantId","in":"path","description":"ID of the tenant for which the request is being made","required":false,"type":"string"},{"name":"entityId","in":"path","description":"ID of the entity for which the request is being made","required":false,"type":"string"},{"name":"policyId","in":"query","description":"The policy id for the policy with the premium and agency commission used to calculate the commission.","required":false,"type":"string"},{"name":"chargeAmount","in":"query","description":"The charge amount that the commission will be based off of.","required":false,"type":"number"}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/SingleResponseV1«CommissionV1»"}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"}}}},"/commission/v1/{productId}/{tenantId}/entities/{entityId}/rules":{"post":{"tags":["commission-rules-controller-v-1"],"summary":"Creates new commission rule.","description":"Creates new commission rule.","operationId":"createCommissionRuleUsingPOST","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"productId","in":"path","description":"ID of the product for which the request is being made","required":false,"type":"string"},{"name":"tenantId","in":"path","description":"ID of the tenant for which the request is being made","required":false,"type":"string"},{"name":"entityId","in":"path","description":"ID of the entity for which the request is being made","required":false,"type":"string"},{"in":"body","name":"newCommissionRule","description":"A new commission rule to be created","required":true,"schema":{"$ref":"#/definitions/CommissionRuleV1"}}],"responses":{"201":{"description":"Created","schema":{"$ref":"#/definitions/SingleResponseV1«CommissionRuleV1»"}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"}}}},"/commission/v1/{productId}/{tenantId}/entities/{entityId}/rules/default":{"get":{"tags":["default-rule-controller-v-1"],"summary":"Get default rule","description":"Retrieves the default rule","operationId":"getDefaultRuleUsingGET","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"productId","in":"path","description":"ID of the product for which the request is being made","required":false,"type":"string"},{"name":"tenantId","in":"path","description":"ID of the tenant for which the request is being made","required":false,"type":"string"},{"name":"entityId","in":"path","description":"ID of the entity for which the request is being made","required":false,"type":"string"}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/SingleResponseV1«DefaultRuleV1»"}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"}}},"put":{"tags":["default-rule-controller-v-1"],"summary":"Update default rule","description":"Updates the default rule","operationId":"updateDefaultRuleUsingPUT","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"productId","in":"path","description":"ID of the product for which the request is being made","required":false,"type":"string"},{"name":"tenantId","in":"path","description":"ID of the tenant for which the request is being made","required":false,"type":"string"},{"name":"entityId","in":"path","description":"ID of the entity for which the request is being made","required":false,"type":"string"},{"in":"body","name":"updatedRule","description":"The updated value of the default rule","required":false,"schema":{"$ref":"#/definitions/DefaultRuleV1"}}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/SingleResponseV1«DefaultRuleV1»"}},"201":{"description":"Created"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"}}}},"/commission/v1/{productId}/{tenantId}/entities/{entityId}/rules/ranks":{"put":{"tags":["commission-rules-controller-v-1"],"summary":"Update the ranks of a set of rules.","description":"Updates a set of rules and ranks in bulk.","operationId":"rankCommissionRulesUsingPUT","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"productId","in":"path","description":"ID of the product for which the request is being made","required":false,"type":"string"},{"name":"tenantId","in":"path","description":"ID of the tenant for which the request is being made","required":false,"type":"string"},{"name":"entityId","in":"path","description":"ID of the entity for which the request is being made","required":false,"type":"string"},{"in":"body","name":"rankings","description":"A list of rule ids and their expected rank values.","required":true,"schema":{"type":"array","items":{"$ref":"#/definitions/CommissionRuleRankV1"}}}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/EmptyResponseV1"}},"201":{"description":"Created"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"}}}},"/commission/v1/{productId}/{tenantId}/entities/{entityId}/rules/{id}":{"get":{"tags":["commission-rules-controller-v-1"],"summary":"Get Commission rule by ID","description":"Retrieves the Commission rule specified by the ID provided.","operationId":"getCommissionRuleUsingGET","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"productId","in":"path","description":"ID of the product for which the request is being made","required":false,"type":"string"},{"name":"tenantId","in":"path","description":"ID of the tenant for which the request is being made","required":false,"type":"string"},{"name":"entityId","in":"path","description":"ID of the entity for which the request is being made","required":false,"type":"string"},{"name":"id","in":"path","description":"ID of the Commission rule to get","required":true,"type":"string"}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/SingleResponseV1«CommissionRuleV1»"}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"}}},"put":{"tags":["commission-rules-controller-v-1"],"summary":"Update existing commission rule.","description":"Update existing commission rule.","operationId":"updateCommissionRuleUsingPUT","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"productId","in":"path","description":"ID of the product for which the request is being made","required":false,"type":"string"},{"name":"tenantId","in":"path","description":"ID of the tenant for which the request is being made","required":false,"type":"string"},{"name":"entityId","in":"path","description":"ID of the entity for which the request is being made","required":false,"type":"string"},{"name":"id","in":"path","description":"ID of the commission rule to update.","required":false,"type":"string"},{"in":"body","name":"commissionRule","description":"A commission rule to update an existing Commission Rule.","required":true,"schema":{"$ref":"#/definitions/CommissionRuleV1"}}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/SingleResponseV1«CommissionRuleV1»"}},"201":{"description":"Created"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"}}},"delete":{"tags":["commission-rules-controller-v-1"],"summary":"Delete Commission rule","description":"Deletes the Commission rule specified by the ID provided.","operationId":"deleteCommissionRuleUsingDELETE","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"productId","in":"path","description":"ID of the product for which the request is being made","required":false,"type":"string"},{"name":"tenantId","in":"path","description":"ID of the tenant for which the request is being made","required":false,"type":"string"},{"name":"entityId","in":"path","description":"ID of the entity for which the request is being made","required":false,"type":"string"},{"name":"id","in":"path","description":"ID of the Commission rule to delete","required":true,"type":"string"}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/EmptyResponseV1"}},"204":{"description":"No Content"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"}}},"patch":{"tags":["commission-rules-controller-v-1"],"summary":"Update existing commission rule.","description":"Update existing commission rule.","operationId":"patchCommissionRuleUsingPATCH","consumes":["application/json-patch+json"],"produces":["application/json"],"parameters":[{"name":"productId","in":"path","description":"ID of the product for which the request is being made","required":false,"type":"string"},{"name":"tenantId","in":"path","description":"ID of the tenant for which the request is being made","required":false,"type":"string"},{"name":"entityId","in":"path","description":"ID of the entity for which the request is being made","required":false,"type":"string"},{"name":"id","in":"path","description":"ID of the commission rule to update.","required":false,"type":"string"},{"in":"body","name":"patch","description":"JSON Patch to update an existing Commission Rule.","required":true,"schema":{"$ref":"#/definitions/JsonPatch«CommissionRuleV1»"}}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/SingleResponseV1«CommissionRuleV1»"}},"204":{"description":"No Content"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"}}}},"/commission/v1/{productId}/{tenantId}/entities/{entityId}/rules{?name,sortField,isDescending,pageSize,page}":{"get":{"tags":["commission-rules-controller-v-1"],"summary":"Retrieve all commission rules ordered by Rank ascending.","description":"Retrieves a paged list of commission rules ordered by Rank ascending.","operationId":"getCommissionRulesUsingGET","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"productId","in":"path","description":"ID of the product for which the request is being made","required":false,"type":"string"},{"name":"tenantId","in":"path","description":"ID of the tenant for which the request is being made","required":false,"type":"string"},{"name":"entityId","in":"path","description":"ID of the entity for which the request is being made","required":false,"type":"string"},{"name":"name","in":"query","description":"Filter by rule name.","required":false,"type":"string"},{"name":"sortField","in":"query","description":"Sort results by specified column.","required":false,"type":"string","default":"rank","enum":["name","rank"]},{"name":"isDescending","in":"query","description":"Whether or not to sort the results in descending order.","required":false,"type":"boolean","default":false},{"name":"pageSize","in":"query","description":"The maximum number of items to include in the response","required":false,"type":"integer","format":"int32"},{"name":"page","in":"query","description":"The page of items to retrieve","required":false,"type":"integer","format":"int32"}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/PagedResponseV1«CommissionRuleV1,LimitOffsetPagingInfoV1»"}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"}}}}},"definitions":{"CommissionRuleRankV1":{"type":"object","properties":{"rank":{"type":"integer","format":"int32","example":1,"description":"Rank the rule referenced. Must be unique to all rules in the tenant."},"ruleId":{"type":"string","example":"26abdeca-2966-11e9-b210-d663bd873d93","description":"Unique id of the rule referenced"}},"description":"The model representing a reference to a commission rule and its associated rank."},"CommissionRuleV1":{"type":"object","required":["description","name","rank"],"properties":{"id":{"type":"string","example":"ab2773bd-cda1-4314-b977-3f0f73f49821","description":"id of commission rule","readOnly":true},"name":{"type":"string","example":"Some Rule Name","description":"Name of commission rule"},"description":{"type":"string","example":"Some Rule Description","description":"Description of commission rule"},"effectiveDate":{"type":"string","format":"date","example":"1970-01-01T00:00:00.000Z","description":"Commission Rule effectiveDate"},"expirationDate":{"type":"string","format":"date","example":"1970-01-01T00:00:00.000Z","description":"Commission Rule expirationDate"},"rank":{"type":"integer","format":"int32","example":2,"description":"Value representing the order in which rule will be applied to receive commission, where the lowest ranked matching rule is applied. Must be unique across all rules in the tenant."},"carrierIds":{"type":"array","example":"3b8da333-c894-4069-a317-36181192ebfa","description":"A list of carrier ids that are used for matching the rule.","items":{"type":"string"}},"writingCarrierIds":{"type":"array","example":"3b8da333-c894-4069-a317-36181192ebfa","description":"A list of carrier ids that are used for matching the rule.","items":{"type":"string"}},"lineOfBusinessIds":{"type":"array","example":"3b8da333-c894-4069-a317-36181192ebfa","description":"Line Of Business Id","items":{"type":"string"}},"locationIds":{"type":"array","example":"4a7da333-c894-4069-a317-36181192ebfa","description":"A list of ids for Agency Location.","items":{"type":"string"}},"sourceIds":{"type":"array","example":"[{'entityId' : 'entityId', 'productId' : 'productId','tenantId' : 'tenantId'}]","description":"A list of contextual ids referencing a Lead Source from the Opportunity Service.","items":{"$ref":"#/definitions/ContextualIdV1"}},"tiers":{"type":"array","example":"[{ 'threshold' : 1, 'type' : 'PERCENTAGE', 'newRate' : 0.0, 'renewalRate' : 10.0, 'rewriteRate' : 0.0 }]","description":"A list of commission tiers.","items":{"$ref":"#/definitions/CommissionTierV1"}},"createdOn":{"type":"string","format":"date-time","example":"1970-01-01T00:00:00.000Z","description":"When the Commission rule was created.","readOnly":true},"updatedOn":{"type":"string","format":"date-time","example":"1970-01-01T00:00:00.000Z","description":"When the Commission rule was last modified.","readOnly":true}},"description":"An CommissionRule definition."},"CommissionTierV1":{"type":"object","required":["threshold","type"],"properties":{"threshold":{"type":"integer","format":"int32","example":0,"description":"threshold"},"type":{"type":"string","example":"FLAT","description":"The Commission type for the Rule","enum":["FLAT","PERCENTAGE"]},"newRate":{"type":"number","example":100.24,"description":"Amount of the commission if the policy is considered a NEW policy.","readOnly":true},"renewalRate":{"type":"number","example":100.24,"description":"Amount of the commission if the policy is considered a RENEWAL policy.","readOnly":true},"rewriteRate":{"type":"number","example":100.24,"description":"Amount of the commission if the policy is considered a REWRITE policy.","readOnly":true}},"description":"An CommissionTier definition."},"CommissionV1":{"type":"object","properties":{"agencyAmount":{"type":"number","example":1075.75,"description":"The dollar amount commission for an agency"},"employeeAmount":{"type":"number","example":200.03,"description":"The dollar amount commission for an employee"}},"description":"The calculated commission for agency and employee."},"ContextualIdV1":{"type":"object","properties":{"tenantId":{"type":"string","description":"ID of the Tenant in which the resource is stored"},"entityId":{"type":"string","description":"ID of the Entity in which the resource is stored"},"id":{"type":"string","description":"ID of the resource itself"}}},"DefaultRuleV1":{"type":"object","required":["newPolicyCommissionRate","renewalPolicyCommissionRate","rewritePolicyCommissionRate","type"],"properties":{"createdOn":{"type":"string","format":"date-time","example":"1970-01-01T00:00:00.000Z","description":"When the Account Mapping was created.","readOnly":true},"newPolicyCommissionRate":{"type":"number","example":"25.25 (for 25.25%) or 50.00 (for a $50 flat rate)","description":"The commission rate for a new policy. Can be a percentage or flat rate. Defaults to 0% until rule is updated"},"renewalPolicyCommissionRate":{"type":"number","example":"10.25 (for 10.25%) or 25.00 (for a $25 flat rate)","description":"The commission rate for a renewal policy. Can be a percentage or flat rate. Defaults to 0% until rule is updated"},"rewritePolicyCommissionRate":{"type":"number","example":"5.25 (for 5.25%)  or 10.00 (for a $10 flat rate)","description":"The commission rate for a rewrite policy. Can be a percentage or flat rate. Defaults to 0% until rule is updated"},"type":{"type":"string","example":"FLAT","description":"The Commission type for the Rule","enum":["FLAT","PERCENTAGE"]},"updatedOn":{"type":"string","format":"date-time","example":"1970-01-01T00:00:00.000Z","description":"When the Account Mapping was last modified.","readOnly":true}}},"EmptyResponseV1":{"type":"object","properties":{"error":{"description":"This field will contain information about the error if one occurred","readOnly":true,"$ref":"#/definitions/ErrorResponseV1"},"requestId":{"type":"string","description":"The unique ID of this request.","readOnly":true},"spanId":{"type":"string","description":"The unique ID of the span.","readOnly":true},"traceId":{"type":"string","description":"The unique ID of the trace.","readOnly":true}}},"ErrorResponseV1":{"type":"object","properties":{"message":{"type":"string"},"status":{"type":"integer","format":"int32"}}},"JsonPatch«CommissionRuleV1»":{"type":"object","description":"A JSON Patch (see http://jsonpatch.com/)"},"LimitOffsetPagingInfoV1":{"type":"object","properties":{"method":{"type":"string","description":"The method of paging that this pagingInfo contains","readOnly":true},"numberOfElements":{"type":"integer","format":"int32","description":"The number of data elements in this response.","readOnly":true},"page":{"type":"integer","format":"int32","description":"The page number of the response.","readOnly":true},"pageSize":{"type":"integer","format":"int32","description":"The page size of this response.","readOnly":true},"totalElements":{"type":"integer","format":"int32","description":"The total number of elements","readOnly":true},"totalPages":{"type":"integer","format":"int32","description":"The total number of pages, based on the pageSize and totalElements","readOnly":true}}},"PagedResponseV1«CommissionRuleV1,LimitOffsetPagingInfoV1»":{"type":"object","properties":{"content":{"type":"array","description":"The data elements requested","readOnly":true,"items":{"$ref":"#/definitions/CommissionRuleV1"}},"error":{"description":"This field will contain information about the error if one occurred","readOnly":true,"$ref":"#/definitions/ErrorResponseV1"},"paging":{"description":"The paging method used","readOnly":true,"$ref":"#/definitions/LimitOffsetPagingInfoV1"},"requestId":{"type":"string","description":"The unique ID of this request.","readOnly":true},"spanId":{"type":"string","description":"The unique ID of the span.","readOnly":true},"traceId":{"type":"string","description":"The unique ID of the trace.","readOnly":true}}},"SingleResponseV1«CommissionRuleV1»":{"type":"object","properties":{"content":{"description":"The response data element","readOnly":true,"$ref":"#/definitions/CommissionRuleV1"},"error":{"description":"This field will contain information about the error if one occurred","readOnly":true,"$ref":"#/definitions/ErrorResponseV1"},"requestId":{"type":"string","description":"The unique ID of this request.","readOnly":true},"spanId":{"type":"string","description":"The unique ID of the span.","readOnly":true},"traceId":{"type":"string","description":"The unique ID of the trace.","readOnly":true}}},"SingleResponseV1«CommissionV1»":{"type":"object","properties":{"content":{"description":"The response data element","readOnly":true,"$ref":"#/definitions/CommissionV1"},"error":{"description":"This field will contain information about the error if one occurred","readOnly":true,"$ref":"#/definitions/ErrorResponseV1"},"requestId":{"type":"string","description":"The unique ID of this request.","readOnly":true},"spanId":{"type":"string","description":"The unique ID of the span.","readOnly":true},"traceId":{"type":"string","description":"The unique ID of the trace.","readOnly":true}}},"SingleResponseV1«DefaultRuleV1»":{"type":"object","properties":{"content":{"description":"The response data element","readOnly":true,"$ref":"#/definitions/DefaultRuleV1"},"error":{"description":"This field will contain information about the error if one occurred","readOnly":true,"$ref":"#/definitions/ErrorResponseV1"},"requestId":{"type":"string","description":"The unique ID of this request.","readOnly":true},"spanId":{"type":"string","description":"The unique ID of the span.","readOnly":true},"traceId":{"type":"string","description":"The unique ID of the trace.","readOnly":true}}}}}